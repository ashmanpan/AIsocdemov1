<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cisco Foresight Agent UI (Demo)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
        }
        
        .navbar {
            background-color: #1a1a1a;
            color: white;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo img {
            height: 30px;
            margin-right: 10px;
            width: 60px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo img {
            height: 30px;
        }
        
        .main-container {
            display: flex;
            height: calc(100vh - 50px);
        }
        
        .sidebar {
            width: 240px;
            background-color: white;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .sidebar-title {
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }
        
        .new-thread-btn {
            display: inline-block;
            margin: 10px 15px;
            padding: 6px 12px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            color: #333;
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
        }
        
        .thread-list {
            list-style: none;
        }
        
        .thread-list-header {
            padding: 10px 15px;
            font-size: 12px;
            color: #666;
        }
        
        .thread-item {
            padding: 10px 15px;
            border-bottom: 1px solid #f0f0f0;
            color: #333;
            cursor: pointer;
        }
        
        .thread-item:hover {
            background-color: #f9f9f9;
        }
        
        .content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .assistant-container {
            text-align: center;
            max-width: 600px;
        }
        
        .assistant-logo {
            margin-bottom: 20px;
        }
        
        .assistant-logo svg {
            width: 100px;
            height: 100px;
        }
        
        .assistant-heading {
            font-size: 24px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .assistant-subtext {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .input-container {
            width: 100%;
            position: relative;
            margin-bottom: 20px;
        }
        
        .input-field {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
        }
        
        .send-button {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #0078d7;
            cursor: pointer;
        }
        
        .disclaimer {
            font-size: 12px;
            color: #999;
        }
        
        .chat-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            display: none;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            padding: 10px 15px;
            border-radius: 8px;
            max-width: 80%;
        }
        
        .user-message {
            background-color: #e3f2fd;
            color: #333;
            align-self: flex-end;
        }
        
        .assistant-message {
            background-color: #f5f5f5;
            color: #333;
            align-self: flex-start;
            line-height: 1.5;
        }
        
        .assistant-message h3 {
            margin-bottom: 10px;
            color: #0078d7;
        }
        
        .assistant-message ul {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        .assistant-message .highlight {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 2px;
        }
        
        .assistant-message .warning {
            color: #d32f2f;
            font-weight: 500;
        }
        
        .assistant-message .success {
            color: #2e7d32;
            font-weight: 500;
        }
        
        .typing-indicator {
            display: inline-block;
            padding: 10px 15px;
            background-color: #f5f5f5;
            border-radius: 8px;
            align-self: flex-start;
        }
        
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #999;
            border-radius: 50%;
            margin-right: 5px;
            animation: typing 1s infinite;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
            margin-right: 0;
        }
        
        .progress-container {
            width: 100%;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #0078d7;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .status-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-right: 5px;
        }
        
        .status-critical {
            background-color: #ffebee;
            color: #d32f2f;
        }
        
        .status-warning {
            background-color: #fff8e1;
            color: #ff8f00;
        }
        
        .status-success {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .status-info {
            background-color: #e3f2fd;
            color: #0277bd;
        }
        
        .chart-container {
            width: 100%;
            height: 120px;
            margin: 15px 0;
            position: relative;
        }
        
        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 24px;
            background-color: #0078d7;
            border-radius: 3px 3px 0 0;
        }
        
        .chart-label {
            position: absolute;
            bottom: -20px;
            text-align: center;
            font-size: 10px;
            color: #666;
            width: 24px;
        }
        
        .table-container {
            width: 100%;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th,
        .data-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .data-table th {
            background-color: #f0f0f0;
            font-weight: 500;
        }
        
        .data-table tbody tr:hover {
            background-color: #f9f9f9;
        }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <img src="ciscologo.jpg" alt="Cisco Logo">
            <span>Foresight Agent UI (Demo)</span>
        </div>
        <div class="actions">
            <svg width="40" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="10" cy="10" r="9" stroke="white" stroke-width="2"/>
                <path d="M10 5V15" stroke="white" stroke-width="2"/>
                <path d="M5 10H15" stroke="white" stroke-width="2"/>
            </svg>
        </div>
    </div>
    
    <div class="main-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">Threads</h2>
            </div>
            <a href="#" class="new-thread-btn">+ New thread</a>
            <ul class="thread-list">
                <li class="thread-list-header">Today</li>
                <li class="thread-item" data-query="Packet Loss Investigation">Packet Loss Investigation</li>
                <li class="thread-item" data-query="Firewall Configuration">Firewall Configuration</li>
                <li class="thread-item" data-query="Network Latency Analysis">Network Latency Analysis</li>
                <li class="thread-item" data-query="Router Troubleshooting">Router Troubleshooting</li>
            </ul>
        </div>
        
        <div class="content">
            <div class="assistant-container" id="welcome-screen">
                <div class="assistant-logo">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="30" fill="#4285F4" opacity="0.8" />
                        <circle cx="60" cy="45" r="25" fill="#34A853" opacity="0.6" />
                        <circle cx="55" cy="55" r="20" fill="#FBBC05" opacity="0.4" />
                    </svg>
                </div>
                <h1 class="assistant-heading">How can I help you today?</h1>
                <p class="assistant-subtext">
                    Choose a suggestion or use the text field to ask a question. I have limitations and won't always get it right, but your feedback will help me improve.
                </p>
                
                <div class="input-container">
                    <input type="text" class="input-field" id="main-input" placeholder="Ask the AI Assistant a question">
                    <button class="send-button" id="main-send-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 2L9 11" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18 2L12 18L9 11L2 8L18 2Z" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                
                <p class="disclaimer">Assistant can make mistakes. Verify responses.</p>
            </div>
            
            <div class="chat-container" id="chat-screen">
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be added here -->
                </div>
                
                <div class="input-container">
                    <input type="text" class="input-field" id="chat-input" placeholder="Ask the AI Assistant a question">
                    <button class="send-button" id="chat-send-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 2L9 11" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18 2L12 18L9 11L2 8L18 2Z" stroke="#0078D7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const welcomeScreen = document.getElementById('welcome-screen');
            const chatScreen = document.getElementById('chat-screen');
            const chatMessages = document.getElementById('chat-messages');
            const mainInput = document.getElementById('main-input');
            const mainSendBtn = document.getElementById('main-send-btn');
            const chatInput = document.getElementById('chat-input');
            const chatSendBtn = document.getElementById('chat-send-btn');
            const threadItems = document.querySelectorAll('.thread-item');
            
            // Rich text response for Example toxic factor
            const toxicFactorHTML = `<div class="root-container">
  <h3>Agentic AI - Packet Loss Investigation</h3>
  <p><strong>Investigating Intermittent Packet Loss on XYZ Corp Core Network (Ticket #67891)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Ticket #67891 received from XYZ Corp NOC. Reports of 5-8% packet loss occurring every 30-45 minutes across multiple sites connecting to primary data center since 09:15 AM today.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Analyzing packet loss pattern. Intermittent issues with regular intervals often indicate resource constraints or scheduled processes. Need comprehensive topology and loss pattern data.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting network topology from <strong>TOPOLOGY_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🗺️</span>
        <span class="agent-name">TOPOLOGY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Topology mapping complete. XYZ Corp network architecture:</p>
        <ul class="compact-list">
          <li>5 Remote sites connected via MPLS cloud</li>
          <li>Primary data center with redundant WAN routers (DC-RTR-01, DC-RTR-02)</li>
          <li>Core switches (CORE-SW-01, CORE-SW-02) in HSRP configuration</li>
          <li>All affected traffic passes through CORE-SW-01 (active)</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating comprehensive diagnostic approach to locate source of packet loss:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting interface diagnostics from <strong>INTERFACE_CHECK_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting traffic analysis from <strong>TRAFFIC_ANALYSIS_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting resource utilization data from <strong>RESOURCE_MONITOR_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting error counter analysis from <strong>ERROR_DETECTION_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting recent changes from <strong>LCM_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔌</span>
        <span class="agent-name">INTERFACE_CHECK_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Interface health analysis complete. Examined all interfaces in path:</p>
        <ul class="compact-list">
          <li>No physical errors or CRC errors detected</li>
          <li>No interface flaps recorded</li>
          <li>Link utilization within normal parameters</li>
          <li>No duplex mismatches found</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Physical Layer Healthy</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">TRAFFIC_ANALYSIS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Traffic pattern analysis complete:</p>
        <ul class="compact-list">
          <li>Packet loss observed across all protocols and applications</li>
          <li>Loss occurs simultaneously at all remote sites</li>
          <li>Clear 35-40 minute cycle in packet loss pattern</li>
          <li>Loss events last approximately 3-5 minutes each time</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Periodic Loss Pattern Detected</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">📈</span>
        <span class="agent-name">RESOURCE_MONITOR_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Resource utilization analysis complete. <strong>Critical finding</strong>:</p>
        <ul class="metric-list">
          <li>CORE-SW-01 CPU utilization spikes to <span class="problem-value">98%</span> every 40 minutes</li>
          <li>Spike duration: 3-4 minutes</li>
          <li>Process name: <code>SNMP_BULKWALK</code> consuming CPU during spikes</li>
          <li>Packet drops perfectly correlate with CPU utilization spikes</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Root Cause Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🚨</span>
        <span class="agent-name">ERROR_DETECTION_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Error counter analysis complete:</p>
        <ul class="compact-list">
          <li>No input/output errors on interfaces</li>
          <li>Buffer allocation failures detected on CORE-SW-01</li>
          <li>Log entries show "Process not running" errors during high CPU events</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Resource Exhaustion Evidence</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📝</span>
        <span class="agent-name">LCM_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Change management analysis complete:</p>
        <ul class="compact-list">
          <li>New monitoring system (SolarWinds) deployed yesterday at 15:30</li>
          <li>SNMP polling interval configured for every 40 minutes</li>
          <li>No other relevant changes in the past 72 hours</li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Relevant Change Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Correlating all diagnostic findings to determine root cause:</p>
        <ul class="finding-list">
          <li>Packet loss occurs at regular 40-minute intervals</li>
          <li>CPU utilization on CORE-SW-01 spikes to 98% during loss events</li>
          <li>SNMP_BULKWALK process consuming resources during spikes</li>
          <li>New monitoring system deployed with 40-minute polling interval</li>
        </ul>
        <p>Root cause identified: Aggressive SNMP polling from new monitoring system causing CPU exhaustion on CORE-SW-01, leading to packet drops.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting remediation plan from <strong>RECOMMENDATIONS_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📋</span>
        <span class="agent-name">RECOMMENDATIONS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Detailed remediation plan generated:</p>
        <div class="remediation-phase">
          <h5><span class="phase-tag">IMMEDIATE</span> (Within 15 minutes)</h5>
          <ol class="action-list">
            <li>Reduce SNMP polling frequency to every 120 minutes</li>
            <li>Implement rate limiting on SNMP requests</li>
            <li>Temporarily disable non-critical OIDs from collection</li>
          </ol>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">SHORT-TERM</span> (Within 24 hours)</h5>
          <ol class="action-list">
            <li>Distribute SNMP load across multiple polling cycles</li>
            <li>Configure polling only for essential MIBs</li>
            <li>Implement SNMP process rate limiting on CORE switches</li>
          </ol>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">LONG-TERM</span> (Within 1 week)</h5>
          <ol class="action-list">
            <li>Redesign monitoring architecture to use distributed collectors</li>
            <li>Implement SNMPv3 with optimization for resource constraints</li>
            <li>Test and validate monitoring impact before full deployment</li>
          </ol>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Root cause analysis and remediation plan complete. Transferring to IO_AGENT for customer communication.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>IO_AGENT</strong>
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Final Analysis Report</h4>
  
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Investigation Component</th>
          <th>Status</th>
          <th>Findings</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Physical Interfaces</td>
          <td><span class="status-tag status-success">Healthy</span></td>
          <td>No physical errors or interface flaps detected</td>
        </tr>
        <tr>
          <td>Traffic Patterns</td>
          <td><span class="status-tag status-warning">Issue Detected</span></td>
          <td>Periodic packet loss occurring every 40 minutes</td>
        </tr>
        <tr>
          <td>Resource Utilization</td>
          <td><span class="status-tag status-error">Critical Issue</span></td>
          <td>CPU spikes to 98% on CORE-SW-01 during loss events</td>
        </tr>
        <tr>
          <td>Error Counters</td>
          <td><span class="status-tag status-warning">Issue Detected</span></td>
          <td>Buffer allocation failures during high CPU events</td>
        </tr>
        <tr>
          <td>Recent Changes</td>
          <td><span class="status-tag status-warning">Relevant Change</span></td>
          <td>New monitoring system deployed with 40-minute polling</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="rca-container">
    <h4>Root Cause Analysis <span class="confidence-tag">98% Confidence</span></h4>
    <p>The intermittent packet loss occurring on the XYZ Corp network is caused by <strong>aggressive SNMP polling</strong> from the newly deployed SolarWinds monitoring system. Every 40 minutes, the system initiates bulk SNMP walks that cause CPU utilization on CORE-SW-01 to spike to 98% for 3-4 minutes. During these resource exhaustion periods, the switch cannot properly process all packets, resulting in 5-8% packet loss across all connected sites.</p>
    
    <div class="timeline">
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">09:15 AM</span>
          <p>First packet loss event occurs</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">09:55 AM</span>
          <p>Second packet loss event occurs</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">10:35 AM</span>
          <p>Third packet loss event occurs</p>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <span class="timeline-time">11:15 AM</span>
          <p>Fourth packet loss event occurs</p>
        </div>
      </div>
    </div>
    
    <p>The timing of these events precisely matches the 40-minute SNMP polling interval configured in the monitoring system deployed yesterday. All diagnostic evidence confirms this correlation.</p>
  </div>
  
  <div class="remediation-container">
    <h4>Recommended Actions</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">IMMEDIATE</span> (Within 15 minutes)</h5>
      <ol class="action-list">
        <li>Reduce SNMP polling frequency to every 120 minutes</li>
        <li>Implement rate limiting on SNMP requests using command:<br>
        <code>snmp-server rate-limit 1</code></li>
        <li>Temporarily disable non-critical OIDs from collection</li>
        <li>Verify resolution by monitoring CPU utilization and packet loss</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">SHORT-TERM</span> (Within 24 hours)</h5>
      <ol class="action-list">
        <li>Distribute SNMP load across multiple polling cycles</li>
        <li>Configure polling only for essential MIBs</li>
        <li>Implement SNMP process rate limiting on CORE switches using:<br>
        <code>process cpu threshold type total rising 80 interval 5 falling 20 interval 5</code></li>
        <li>Create CPU monitoring alert for proactive detection</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">LONG-TERM</span> (Within 1 week)</h5>
      <ol class="action-list">
        <li>Redesign monitoring architecture to use distributed collectors</li>
        <li>Implement SNMPv3 with optimization for resource constraints</li>
        <li>Test and validate monitoring impact in lab environment before deployment</li>
        <li>Create monitoring design document with best practices for future implementation</li>
      </ol>
    </div>
  </div>
  
  
  <style>
    .root-container {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    h3, h4 {
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      margin-top: 0;
    }
    
    .agent-workflow {
      margin: 20px 0;
    }
    
    .agent-step {
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      background-color: #ffffff;
    }
    
    .highlight-step {
      border: 2px solid #e74c3c;
      box-shadow: 0 2px 5px rgba(231, 76, 60, 0.2);
    }
    
    .agent-header {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      background-color: #f5f7fa;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .agent-icon {
      font-size: 1.2em;
      margin-right: 8px;
    }
    
    .agent-name {
      font-weight: bold;
      flex-grow: 1;
      color: #34495e;
    }
    
    .agent-content {
      padding: 15px;
    }
    
    .agent-transfer {
      margin-top: 10px;
      color: #7f8c8d;
      font-size: 0.9em;
      font-style: italic;
    }
    
    .multi-transfer {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-top: 10px;
    }
    
    .arrow {
      display: inline-block;
      font-weight: bold;
      margin-right: 5px;
      color: #3498db;
    }
    
    .status-tag {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: bold;
      margin-left: 10px;
    }
    
    .status-success {
      background-color: #d4edda;
      color: #155724;
    }
    
    .status-warning {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .status-error {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .status-info {
      background-color: #d1ecf1;
      color: #0c5460;
    }
    
    .compact-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .compact-list li {
      margin-bottom: 5px;
    }
    
    .metric-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .normal-value {
      color: #27ae60;
      font-weight: bold;
    }
    
    .problem-value {
      color: #e74c3c;
      font-weight: bold;
    }
    
    .finding-summary {
      margin-top: 10px;
    }
    
    .finding-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 4px;
      font-weight: bold;
      font-size: 0.85em;
    }
    
    .finding-good {
      background-color: #d4edda;
      color: #155724;
    }
    
    .finding-issue {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .finding-critical {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .change-details {
      background-color: #fef2f2;
      border-left: 3px solid #e74c3c;
      padding: 10px;
      margin: 10px 0;
    }
    
    .completed {
      position: relative;
    }
    
    .completed::after {
      content: "✓";
      position: absolute;
      top: 10px;
      right: 10px;
      width: 20px;
      height: 20px;
      background-color: #2ecc71;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    .table-container {
      margin: 20px 0;
      overflow-x: auto;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .data-table th, .data-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .data-table th {
      background-color: #f2f2f2;
      font-weight: 600;
    }
    
    .data-table tr:hover {
      background-color: #f5f5f5;
    }
    
    .section-header {
      margin-top: 25px;
      color: #2c3e50;
      border-left: 4px solid #3498db;
      padding-left: 10px;
    }
    
    .rca-container {
      background-color: #e8f4fd;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    
    .rca-container h4 {
      border: none;
      margin-top: 0;
      padding-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .confidence-tag {
      background-color: #3498db;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8em;
    }
    
    .timeline {
      margin: 20px 0;
      position: relative;
    }
    
    .timeline::before {
      content: '';
      position: absolute;
      top: 0;
      left: 15px;
      height: 100%;
      width: 2px;
      background-color: #3498db;
    }
    
    .timeline-item {
      position: relative;
      padding-left: 40px;
      margin-bottom: 15px;
    }
    
    .timeline-dot {
      position: absolute;
      left: 9px;
      top: 5px;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: #3498db;
      border: 2px solid #fff;
    }
    
    .timeline-content {
      padding: 3px 0;
    }
    
    .timeline-time {
      font-weight: bold;
      color: #34495e;
    }
    
    .timeline-content p {
      margin: 2px 0 0 0;
    }
    
    .remediation-container {
      margin-bottom: 20px;
    }
    
    .remediation-phase {
      margin-bottom: 15px;
      padding: 10px;
      border-left: 3px solid #3498db;
      background-color: #f8f9fa;
    }
    
    .phase-tag {
      background-color: #34495e;
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8em;
      font-weight: normal;
    }
    
    .action-list {
      margin-top: 8px;
      padding-left: 25px;
    }
    
    .action-list li {
      margin-bottom: 6px;
    }
    
    code {
      background-color: #f1f1f1;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.9em;
    }
    
    .action-request {
      background-color: #f9f9f9;
      border: 1px solid #e0e0e0;
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
    }
    
    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .action-button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .approve {
      background-color: #2ecc71;
      color: white;
    }
    
    .schedule {
      background-color: #3498db;
      color: white;
    }
    
    .more-info {
      background-color: #95a5a6;
      color: white;
    }
    
    .approve:hover {
      background-color: #27ae60;
    }
    
    .schedule:hover {
      background-color: #2980b9;
    }
    
    .more-info:hover {
      background-color: #7f8c8d;
    }
    
    .finding-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .finding-list li {
      margin-bottom: 6px;
    }
  </style>
</div>`;

            // Rich text response for Firewall Configuration
            const firewallConfigHTML = `<h3>Firewall Configuration Analysis</h3>
<p><strong>Analyzing your current firewall configuration...</strong></p>

<div class="progress-container">
    <div class="progress-bar">
        <div class="progress-fill" style="width: 100%;"></div>
    </div>
</div>

<p>Analysis complete. <span class="status-tag status-warning">5 Issues Found</span></p>

<p>Found <span class="highlight">23 active rules</span> with <span class="warning">5 potential conflicts</span> in zone policies:</p>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>Rule #</th>
                <th>Conflict Type</th>
                <th>Severity</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>#17 & #22</td>
                <td>Overlapping address spaces</td>
                <td><span class="status-tag status-critical">Critical</span></td>
            </tr>
            <tr>
                <td>#08 & #15</td>
                <td>Contradicting actions</td>
                <td><span class="status-tag status-warning">Medium</span></td>
            </tr>
            <tr>
                <td>#31</td>
                <td>Overly permissive</td>
                <td><span class="status-tag status-warning">Medium</span></td>
            </tr>
        </tbody>
    </table>
</div>

<p>Security posture assessment:</p>
<ul>
    <li><span class="warning">Detected 3 overly permissive rules</span> that could be tightened for improved security</li>
    <li>Rule #31 allows <span class="highlight">ALL traffic from DMZ to Internal</span> without inspection</li>
    <li>Rules #12-14 could be consolidated into a single rule for better management</li>
</ul>

<p><strong class="success">Recommendation:</strong> Consider implementing a zero-trust approach with more granular access controls and implement the following changes:</p>
<ul>
    <li>Modify rule #17 to exclude the subnet covered by rule #22</li>
    <li>Enable application-layer inspection for DMZ traffic</li>
    <li>Implement time-based access controls for administrative protocols</li>
</ul>`;

            // Rich text response for Network Latency Analysis
            const networkLatencyHTML = `<h3>Network Latency Analysis Report</h3>
<p><strong>Running network latency analysis across all monitored segments...</strong></p>

<div class="progress-container">
    <div class="progress-bar">
        <div class="progress-fill" style="width: 100%;"></div>
    </div>
</div>

<p>Analysis complete. <span class="status-tag status-critical">Critical Issue Detected</span></p>

<p>Detected <span class="warning">abnormal latency spikes</span> between HQ and East Branch office occurring daily at <span class="highlight">14:00-15:30</span>:</p>

<div class="chart-container">
    <div class="chart-bar" style="height: 30px; left: 10px;"></div>
    <div class="chart-label" style="left: 10px;">9:00</div>
    <div class="chart-bar" style="height: 25px; left: 44px;"></div>
    <div class="chart-label" style="left: 44px;">10:00</div>
    <div class="chart-bar" style="height: 40px; left: 78px;"></div>
    <div class="chart-label" style="left: 78px;">11:00</div>
    <div class="chart-bar" style="height: 45px; left: 112px;"></div>
    <div class="chart-label" style="left: 112px;">12:00</div>
    <div class="chart-bar" style="height: 50px; left: 146px;"></div>
    <div class="chart-label" style="left: 146px;">13:00</div>
    <div class="chart-bar" style="height: 110px; left: 180px; background-color: #d32f2f;"></div>
    <div class="chart-label" style="left: 180px;">14:00</div>
    <div class="chart-bar" style="height: 100px; left: 214px; background-color: #d32f2f;"></div>
    <div class="chart-label" style="left: 214px;">15:00</div>
    <div class="chart-bar" style="height: 40px; left: 248px;"></div>
    <div class="chart-label" style="left: 248px;">16:00</div>
    <div class="chart-bar" style="height: 30px; left: 282px;"></div>
    <div class="chart-label" style="left: 282px;">17:00</div>
</div>

<p>Performance metrics during issue periods:</p>
<ul>
    <li>Average latency increased from <span class="success">45ms</span> to <span class="warning">320ms</span></li>
    <li>Packet loss rate: <span class="highlight">2.7%</span></li>
    <li>Jitter: <span class="highlight">18ms</span></li>
</ul>

<p>Root cause analysis:</p>
<ul>
    <li>Scheduled backup processes consuming <span class="warning">87% of available bandwidth</span></li>
    <li>Backup server (IP: <span class="highlight">10.45.67.89</span>) transferring approximately 120GB daily</li>
    <li>No QoS policies in place to prioritize real-time traffic</li>
</ul>

<p><strong class="success">Recommendation:</strong> Implement the following changes:</p>
<ul>
    <li>Reschedule backup windows to off-peak hours (19:00-07:00)</li>
    <li>Implement QoS policies to prioritize critical traffic</li>
    <li>Increase bandwidth allocation for the East Branch link</li>
</ul>`;

            // Rich text response for Router Troubleshooting
            const routerTroubleshootingHTML = `<h3>Router Troubleshooting Analysis</h3>
<p><strong>Diagnosing router issues based on logs and telemetry data...</strong></p>

<div class="progress-container">
    <div class="progress-bar">
        <div class="progress-fill" style="width: 100%;"></div>
    </div>
</div>

<p>Analysis complete. <span class="status-tag status-critical">Critical Issues Found</span></p>

<p>Identified issues on core router <span class="warning">CR-01</span> coinciding with reported connectivity problems:</p>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>Issue</th>
                <th>Severity</th>
                <th>Impact</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>CPU Spikes</td>
                <td><span class="status-tag status-critical">Critical</span></td>
                <td>Performance degradation</td>
            </tr>
            <tr>
                <td>BGP Sessions Flapping</td>
                <td><span class="status-tag status-critical">Critical</span></td>
                <td>Routing instability</td>
            </tr>
            <tr>
                <td>Memory Utilization</td>
                <td><span class="status-tag status-warning">Warning</span></td>
                <td>Potential system failure</td>
            </tr>
        </tbody>
    </table>
</div>

<p>Detailed findings:</p>
<ul>
    <li>CPU utilization spikes to <span class="warning">94%</span> every 45 minutes</li>
    <li>BGP sessions flapping with peers <span class="highlight">192.168.100.1</span> and <span class="highlight">192.168.100.2</span></li>
    <li>Memory utilization consistently above <span class="warning">85%</span> which may indicate a memory leak</li>
    <li>Process <span class="highlight">IP Input</span> consuming excessive CPU during spikes</li>
    <li>Log analysis shows <span class="warning">3,456 syslog messages</span> related to memory allocation failures in the last 24 hours</li>
</ul>

<p><strong class="success">Recommendation:</strong> Apply firmware update <span class="highlight">15.4(3)M2</span> which addresses known memory management issues. Additionally:</p>
<ul>
    <li>Increase BGP timers to improve stability during recovery</li>
    <li>Implement graceful restart for critical routing protocols</li>
    <li>Schedule maintenance window for router reboot and firmware update</li>
    <li>Monitor memory usage post-update to confirm resolution</li>
</ul>`;

            // Rich text response for Default
            const defaultResponseHTML = `<div class="root-container">
  <h3>Agentic AI - Root Cause Analysis Workflow</h3>
  <p><strong>Investigating Application Performance Issue at ABC Bank Mumbai Branch (Ticket #45782)</strong></p>
  
  <div class="agent-workflow">
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">⚙️</span>
        <span class="agent-name">IO_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Ticket #45782 received from ABC Bank Mumbai branch. Multiple users reporting application response times of 3-5 seconds since 10:45 AM local time.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating systematic investigation approach. Need to map environment and coordinate parallel checks on all components.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting topology from <strong>TOPOLOGY_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🗺️</span>
        <span class="agent-name">TOPOLOGY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Topology mapping complete. Full path from Mumbai to DC-West identified:</p>
        <ul class="compact-list">
          <li>Edge: R1-MUM (10.11.1.1)</li>
          <li>Provider Edge: R2-GW (172.16.0.2)</li>
          <li>Core: R3-CORE (172.16.0.6)</li>
          <li>DC Gateway: DC-GW (10.224.0.1)</li>
          <li>Active tunnel: Tunnel-17 (VPN-456789)</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Initiating parallel investigations to minimize MTTR:</p>
        <div class="multi-transfer">
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting interface checks from <strong>INTERFACE_CHECK_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting performance analysis from <strong>HISTORICAL_PERF_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting QoS verification from <strong>QOS_POLICY_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting path verification from <strong>TRAFFIC_PATH_AGENT</strong>
          </div>
          <div class="agent-transfer">
            <span class="arrow">→</span> Requesting change records from <strong>LCM_AGENT</strong>
          </div>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔌</span>
        <span class="agent-name">INTERFACE_CHECK_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Physical layer analysis complete. All interfaces in path are clean - no errors, no discards, no flaps detected.</p>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Physical Layer Healthy</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📊</span>
        <span class="agent-name">HISTORICAL_PERF_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Performance analysis complete. Detected significant deviation from baseline during incident window:</p>
        <ul class="metric-list">
          <li>Latency: <span class="normal-value">12ms</span> → <span class="problem-value">45ms</span></li>
          <li>Jitter: <span class="normal-value">3ms</span> → <span class="problem-value">18ms</span></li>
          <li>Packet Loss: <span class="normal-value">0.01%</span> → <span class="problem-value">0.8%</span></li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-issue">Performance Degradation</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🔄</span>
        <span class="agent-name">QOS_POLICY_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>QoS policy analysis complete. Detected drop conditions in high-priority queues:</p>
        <ul class="compact-list">
          <li>VOICE class: 12% packet drops</li>
          <li>CRITICAL-DATA class: 8% packet drops</li>
          <li>ABC Bank application traffic is classified in CRITICAL-DATA</li>
          <li>Bandwidth allocation changed from <span class="normal-value">35%</span> to <span class="problem-value">25%</span></li>
        </ul>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">QoS Configuration Issue</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🛣️</span>
        <span class="agent-name">TRAFFIC_PATH_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Routing verification complete. Traffic is following expected path through network.</p>
        <div class="finding-summary">
          <span class="finding-tag finding-good">Routing Path Correct</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed highlight-step">
      <div class="agent-header">
        <span class="agent-icon">📝</span>
        <span class="agent-name">LCM_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Change analysis complete. <strong>Critical finding</strong>: QoS policy change (CR-45211) implemented on R2-GW at 10:40 AM - exactly 5 minutes before reported issues began.</p>
        <div class="change-details">
          <p>Change reduced bandwidth allocation for CRITICAL-DATA class from 35% to 25% as part of network-wide standardization.</p>
        </div>
        <div class="finding-summary">
          <span class="finding-tag finding-critical">Root Cause Identified</span>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>All diagnostic data collected. Analyzing correlation between findings:</p>
        <ul class="compact-list">
          <li>Physical infrastructure is healthy</li>
          <li>Performance metrics show degradation during specific window</li>
          <li>QoS queue drops detected in critical traffic class</li>
          <li>Routing path is correct</li>
          <li>QoS policy change aligns perfectly with issue onset</li>
        </ul>
        <div class="agent-transfer">
          <span class="arrow">→</span> Requesting remediation plan from <strong>RECOMMENDATIONS_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">📋</span>
        <span class="agent-name">RECOMMENDATIONS_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Generated detailed remediation plan with timeline-based approach:</p>
        <div class="remediation-phase">
          <h5><span class="phase-tag">IMMEDIATE</span> (5 minutes)</h5>
          <p>Restore CRITICAL-DATA bandwidth allocation from 25% to previous 35% on R2-GW</p>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">SHORT-TERM</span> (24-48 hours)</h5>
          <p>Analyze Mumbai branch traffic patterns and right-size QoS allocations</p>
        </div>
        <div class="remediation-phase">
          <h5><span class="phase-tag">LONG-TERM</span> (1-2 weeks)</h5>
          <p>Review QoS standardization project and update change management</p>
        </div>
        <div class="agent-transfer">
          <span class="arrow">→</span> Reporting back to <strong>MASTER_REASONING_AGENT</strong>
        </div>
      </div>
    </div>
    
    <div class="agent-step completed">
      <div class="agent-header">
        <span class="agent-icon">🧠</span>
        <span class="agent-name">MASTER_REASONING_AGENT</span>
        <span class="status-tag status-success">Complete</span>
      </div>
      <div class="agent-content">
        <p>Root cause analysis and remediation plan complete. Transferring to IO_AGENT for customer communication.</p>
        <div class="agent-transfer">
          <span class="arrow">→</span> Transferring to <strong>IO_AGENT</strong>
        </div>
      </div>
    </div>
  </div>
  
  <h4 class="section-header">Final Analysis Report</h4>
  
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Investigation Component</th>
          <th>Status</th>
          <th>Findings</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Physical Infrastructure</td>
          <td><span class="status-tag status-success">Healthy</span></td>
          <td>No errors, discards or interface flaps detected</td>
        </tr>
        <tr>
          <td>Network Performance</td>
          <td><span class="status-tag status-warning">Degraded</span></td>
          <td>Latency increased from 12ms to 45ms during incident window</td>
        </tr>
        <tr>
          <td>QoS Configuration</td>
          <td><span class="status-tag status-error">Issue Detected</span></td>
          <td>Critical-Data class drops of 8% observed</td>
        </tr>
        <tr>
          <td>Routing Path</td>
          <td><span class="status-tag status-success">Correct</span></td>
          <td>Traffic following expected network path</td>
        </tr>
        <tr>
          <td>Recent Changes</td>
          <td><span class="status-tag status-error">Relevant Change Found</span></td>
          <td>QoS policy modification at 10:40 AM (CR-45211)</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="rca-container">
    <h4>Root Cause Analysis <span class="confidence-tag">95% Confidence</span></h4>
    <p>The application slowness at ABC Bank Mumbai branch was caused by a QoS policy change implemented at 10:40 AM today on router R2-GW. The change reduced bandwidth allocation for critical application traffic from 35% to 25%, causing queue congestion, packet drops, and increased latency during the 10:45-11:10 AM window.</p>
    <p>All diagnostic agents confirm this finding with physical layer, routing, and other potential causes ruled out. The issue timing precisely aligns with the policy change implementation.</p>
  </div>
  
  <div class="remediation-container">
    <h4>Recommended Actions</h4>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">IMMEDIATE</span> (Resolution within 5 minutes)</h5>
      <ol class="action-list">
        <li>Implement emergency change to restore CRITICAL-DATA bandwidth allocation from 25% to previous 35% on R2-GW</li>
        <li>Command: <code>config t; policy-map WAN-EDGE; class CRITICAL-DATA; bandwidth percent 35; end; write mem</code></li>
        <li>Verify queue drops cease after implementation</li>
        <li>Monitor application performance for 15 minutes to confirm resolution</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">SHORT-TERM</span> (24-48 hours)</h5>
      <ol class="action-list">
        <li>Analyze Mumbai branch traffic patterns over 7-day period</li>
        <li>Right-size QoS allocations based on actual usage patterns</li>
        <li>Create Mumbai-specific policy template</li>
      </ol>
    </div>
    
    <div class="remediation-phase">
      <h5><span class="phase-tag">LONG-TERM</span> (1-2 weeks)</h5>
      <ol class="action-list">
        <li>Review network-wide QoS standardization project</li>
        <li>Create branch-specific exceptions process</li>
        <li>Update change management procedure to include application testing</li>
      </ol>
    </div>
  </div>
  
  
  <style>
    .root-container {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    h3, h4 {
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      margin-top: 0;
    }
    
    .agent-workflow {
      margin: 20px 0;
    }
    
    .agent-step {
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      background-color: #ffffff;
    }
    
    .highlight-step {
      border: 2px solid #e74c3c;
      box-shadow: 0 2px 5px rgba(231, 76, 60, 0.2);
    }
    
    .agent-header {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      background-color: #f5f7fa;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .agent-icon {
      font-size: 1.2em;
      margin-right: 8px;
    }
    
    .agent-name {
      font-weight: bold;
      flex-grow: 1;
      color: #34495e;
    }
    
    .agent-content {
      padding: 15px;
    }
    
    .agent-transfer {
      margin-top: 10px;
      color: #7f8c8d;
      font-size: 0.9em;
      font-style: italic;
    }
    
    .multi-transfer {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-top: 10px;
    }
    
    .arrow {
      display: inline-block;
      font-weight: bold;
      margin-right: 5px;
      color: #3498db;
    }
    
    .status-tag {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: bold;
      margin-left: 10px;
    }
    
    .status-success {
      background-color: #d4edda;
      color: #155724;
    }
    
    .status-warning {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .status-error {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .status-info {
      background-color: #d1ecf1;
      color: #0c5460;
    }
    
    .compact-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .compact-list li {
      margin-bottom: 5px;
    }
    
    .metric-list {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .normal-value {
      color: #27ae60;
      font-weight: bold;
    }
    
    .problem-value {
      color: #e74c3c;
      font-weight: bold;
    }
    
    .finding-summary {
      margin-top: 10px;
    }
    
    .finding-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 4px;
      font-weight: bold;
      font-size: 0.85em;
    }
    
    .finding-good {
      background-color: #d4edda;
      color: #155724;
    }
    
    .finding-issue {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .finding-critical {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    .change-details {
      background-color: #fef2f2;
      border-left: 3px solid #e74c3c;
      padding: 10px;
      margin: 10px 0;
    }
    
    .completed {
      position: relative;
    }
    
    .completed::after {
      content: "✓";
      position: absolute;
      top: 10px;
      right: 10px;
      width: 20px;
      height: 20px;
      background-color: #2ecc71;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    .table-container {
      margin: 20px 0;
      overflow-x: auto;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .data-table th, .data-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .data-table th {
      background-color: #f2f2f2;
      font-weight: 600;
    }
    
    .data-table tr:hover {
      background-color: #f5f5f5;
    }
    
    .section-header {
      margin-top: 25px;
      color: #2c3e50;
      border-left: 4px solid #3498db;
      padding-left: 10px;
    }
    
    .rca-container {
      background-color: #e8f4fd;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
    
    .rca-container h4 {
      border: none;
      margin-top: 0;
      padding-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .confidence-tag {
      background-color: #3498db;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.8em;
    }
    
    .remediation-container {
      margin-bottom: 20px;
    }
    
    .remediation-phase {
      margin-bottom: 15px;
      padding: 10px;
      border-left: 3px solid #3498db;
      background-color: #f8f9fa;
    }
    
    .phase-tag {
      background-color: #34495e;
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8em;
      font-weight: normal;
    }
    
    .action-list {
      margin-top: 8px;
      padding-left: 25px;
    }
    
    .action-list li {
      margin-bottom: 6px;
    }
    
    code {
      background-color: #f1f1f1;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.9em;
    }
    
    .action-request {
      background-color: #f9f9f9;
      border: 1px solid #e0e0e0;
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
    }
    
    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .action-button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .approve {
      background-color: #2ecc71;
      color: white;
    }
    
    .schedule {
      background-color: #3498db;
      color: white;
    }
    
    .more-info {
      background-color: #95a5a6;
      color: white;
    }
    
    .approve:hover {
      background-color: #27ae60;
    }
    
    .schedule:hover {
      background-color: #2980b9;
    }
    
    .more-info:hover {
      background-color: #7f8c8d;
    }
  </style>
</div>`;

            // Dummy responses for different queries with HTML content
            const dummyResponses = {
                'Packet Loss Investigation': [toxicFactorHTML],
                'Firewall Configuration': [firewallConfigHTML],
                'Network Latency Analysis': [networkLatencyHTML],
                'Router Troubleshooting': [routerTroubleshootingHTML],
                'default': [defaultResponseHTML]
            };
            
            // Function to send a message
            function sendMessage(message) {
    // Switch to chat view
    welcomeScreen.style.display = 'none';
    chatScreen.style.display = 'flex';
    
    // Clear input
    mainInput.value = '';
    chatInput.value = '';
    
    // Add user message
    const userMessageElement = document.createElement('div');
    userMessageElement.className = 'message user-message';
    userMessageElement.textContent = message;
    chatMessages.appendChild(userMessageElement);
    
    // Add typing indicator
    const typingIndicator = document.createElement('div');
    typingIndicator.className = 'typing-indicator';
    typingIndicator.innerHTML = '<span></span><span></span><span></span>';
    chatMessages.appendChild(typingIndicator);
    
    // Auto-scroll to bottom
    chatMessages.scrollTop = chatMessages.scrollHeight;
    
    // Get response
    const responseKey = dummyResponses[message] ? message : 'default';
    const response = dummyResponses[responseKey];
    
    // Create assistant message element
    const assistantMessageElement = document.createElement('div');
    assistantMessageElement.className = 'message assistant-message';
    
    // Helper function for random delays
    function getRandomDelay(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    // Start streaming after a longer delay (increased from 800ms to 2000ms)
    setTimeout(() => {
        // Remove typing indicator
        chatMessages.removeChild(typingIndicator);
        
        // Add the message element
        chatMessages.appendChild(assistantMessageElement);
        
        // For HTML content (all responses now use HTML)
        // Reduce chunk size for slower appearance
        const htmlChunks = splitHTMLToChunks(response[0], 5); // Reduced from 10 to 5 chars
        
        let currentHTML = '';
        let chunkIndex = 0;
        
        // Function to process the next chunk with variable timing
        function processNextChunk() {
            if (chunkIndex < htmlChunks.length) {
                currentHTML += htmlChunks[chunkIndex];
                assistantMessageElement.innerHTML = currentHTML;
                chunkIndex++;
                
                // Auto-scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Decide on the delay for the next chunk
                let nextDelay;
                
                // Every 10 chunks, pause for a bit longer to simulate thinking
                if (chunkIndex % 10 === 0) {
                    nextDelay = getRandomDelay(300, 800);
                } 
                // Every 5 chunks, pause briefly
                else if (chunkIndex % 5 === 0) {
                    nextDelay = getRandomDelay(150, 350);
                }
                // Regular typing speed
                else {
                    nextDelay = getRandomDelay(70, 120);
                }
                
                setTimeout(processNextChunk, nextDelay);
            }
        }
        
        // Start the processing
        processNextChunk();
        
    }, 2000); // Increased from 800ms to 2000ms
}
            
            // Function to split HTML into chunks while preserving tags
            function splitHTMLToChunks(html, chunkSize) {
                const result = [];
                let currentChunk = '';
                let inTag = false;
                
               for (let i = 0; i < html.length; i++) {
                    const char = html[i];
                    
                    // Always add the current character to the chunk
                    currentChunk += char;
                    
                    // If we're inside a tag, don't count it toward chunk size
                    if (char === '<') {
                        inTag = true;
                    } else if (char === '>') {
                        inTag = false;
                    }
                    
                    // If we've reached chunk size and we're not inside a tag, add chunk to result
                    if (currentChunk.length >= chunkSize && !inTag) {
                        result.push(currentChunk);
                        currentChunk = '';
                    }
                }
                
                // Add the remaining chunk if there is any
                if (currentChunk) {
                    result.push(currentChunk);
                }
                
                return result;
            }
            
            // Event listeners for sidebar items
            threadItems.forEach(item => {
                item.addEventListener('click', function() {
                    const query = this.getAttribute('data-query');
                    mainInput.value = query;
                    chatInput.value = query;
                    sendMessage(query);
                });
            });
            
            // Event listeners for send buttons
            mainSendBtn.addEventListener('click', function() {
                if (mainInput.value.trim() !== '') {
                    sendMessage(mainInput.value.trim());
                }
            });
            
            chatSendBtn.addEventListener('click', function() {
                if (chatInput.value.trim() !== '') {
                    sendMessage(chatInput.value.trim());
                }
            });
            
            // Event listeners for pressing Enter key
            mainInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && mainInput.value.trim() !== '') {
                    sendMessage(mainInput.value.trim());
                }
            });
            
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && chatInput.value.trim() !== '') {
                    sendMessage(chatInput.value.trim());
                }
            });
            
            // Event listener for new thread button
            document.querySelector('.new-thread-btn').addEventListener('click', function() {
                welcomeScreen.style.display = 'block';
                chatScreen.style.display = 'none';
                chatMessages.innerHTML = '';
            });
        });
    </script>
</body>
</html>