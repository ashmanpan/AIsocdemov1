<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domain Routing Test</title>
    <style>
        body {
            background: #0a0a0a;
            color: #fff;
            font-family: 'Courier New', monospace;
            padding: 20px;
        }
        .test-box {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .success { border-color: #00ff88; }
        .pending { border-color: #ffaa00; }
        .info { border-color: #00aaff; }
        h1 { color: #00ff88; }
        h2 { color: #00aaff; margin-top: 0; }
        code {
            background: #000;
            padding: 2px 6px;
            border-radius: 3px;
            color: #00ff88;
        }
        .dns-record {
            background: #000;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üéØ CiscoTube Domain Routing Test</h1>

    <div class="test-box success">
        <h2>‚úÖ Current Hostname</h2>
        <p>You are currently accessing: <code id="currentHost"></code></p>
        <p>Expected redirect: <code id="expectedRedirect"></code></p>
    </div>

    <div class="test-box info">
        <h2>üìã How It Works</h2>
        <ol>
            <li>User visits: <code>https://ciscotube.ciscoaidemo.com</code></li>
            <li>DNS resolves to CloudFront: <code>d29zyx1j2v1g99.cloudfront.net</code></li>
            <li>Amplify serves: <code>index.html</code></li>
            <li>JavaScript detects hostname: <code>ciscotube.ciscoaidemo.com</code></li>
            <li>Auto-redirects to: <code>/ciscotube.html</code></li>
        </ol>
    </div>

    <div class="test-box pending">
        <h2>‚ö†Ô∏è DNS Configuration Required</h2>
        <p>Add this CNAME record to your DNS provider:</p>
        <div class="dns-record">
Type: CNAME
Host: ciscotube
Value: d29zyx1j2v1g99.cloudfront.net
TTL: 300
        </div>
    </div>

    <div class="test-box info">
        <h2>üß™ Test All Domain Mappings</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="border-bottom: 1px solid #333;">
                    <th style="text-align: left; padding: 10px;">Domain</th>
                    <th style="text-align: left; padding: 10px;">Redirects To</th>
                    <th style="text-align: left; padding: 10px;">Status</th>
                </tr>
            </thead>
            <tbody id="domainTests">
                <!-- Will be populated by JavaScript -->
            </tbody>
        </table>
    </div>

    <div class="test-box success">
        <h2>‚úÖ Deployment Status</h2>
        <p>Latest commit deployed: <code>1dec9b1</code></p>
        <p>Job status: <code>SUCCEED</code></p>
        <p>Domain status: <code>AVAILABLE</code></p>
        <p>Subdomain verified: <code>Pending DNS update</code></p>
    </div>

    <script>
        // Display current hostname
        const currentHost = window.location.hostname;
        document.getElementById('currentHost').textContent = currentHost;

        // Domain routing map
        const routingMap = {
            'aisoc.ciscoaidemo.com': '/Cisco-AI-SoC-Telco-v2.5.html',
            'ainoc.ciscoaidemo.com': '/Cisco-AI-NoC-Telco-v5.html',
            'aidcnoc.ciscoaidemo.com': '/Cisco-AI-DC-v1.0.html',
            'marketplace.ciscoaidemo.com': '/agent-marketplace.html',
            'pc-ai.ciscoaidemo.com': '/parental-control.html',
            'ciscotube.ciscoaidemo.com': '/ciscotube.html',
            'allinone.ciscoaidemo.com': '/index.html (no redirect)'
        };

        // Show expected redirect
        const expectedRedirect = routingMap[currentHost] || 'No redirect configured';
        document.getElementById('expectedRedirect').textContent = expectedRedirect;

        // Populate domain tests table
        const tbody = document.getElementById('domainTests');
        for (const [domain, target] of Object.entries(routingMap)) {
            const row = document.createElement('tr');
            row.style.borderBottom = '1px solid #222';

            const isCurrentDomain = domain === currentHost;
            const status = isCurrentDomain ? 'üü¢ Active' : '‚ö™ Inactive';

            row.innerHTML = `
                <td style="padding: 10px; ${isCurrentDomain ? 'color: #00ff88;' : ''}">${domain}</td>
                <td style="padding: 10px;"><code>${target}</code></td>
                <td style="padding: 10px;">${status}</td>
            `;
            tbody.appendChild(row);
        }

        // Auto-test redirect logic
        console.log('=== Domain Routing Test ===');
        console.log('Current hostname:', currentHost);
        console.log('Expected redirect:', expectedRedirect);

        if (currentHost === 'ciscotube.ciscoaidemo.com') {
            console.log('‚úÖ CiscoTube domain detected!');
            console.log('This page should redirect to /ciscotube.html in 3 seconds...');
            setTimeout(() => {
                console.log('Redirecting now...');
                // Uncomment to test actual redirect:
                // window.location.href = '/ciscotube.html';
            }, 3000);
        }
    </script>
</body>
</html>
